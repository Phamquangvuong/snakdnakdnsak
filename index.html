<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‚ú¶ Profile ‚ú¶</title>
<link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@400;700;900&family=Crimson+Pro:ital,wght@0,300;0,400;1,300&family=Noto+Serif+JP:wght@200;300&display=swap" rel="stylesheet">
<style>
  :root {
    --black: #030308;
    --deep: #07060f;
    --void: #0d0b1a;
    --mystic-purple: #1a0a2e;
    --glow-purple: #6b21a8;
    --accent-violet: #9333ea;
    --ghost-white: rgba(220,210,255,0.85);
    --mist: rgba(150,120,220,0.15);
    --smoke: rgba(100,80,180,0.08);
  }

  * { margin:0; padding:0; box-sizing:border-box; }

  html, body {
    min-height: 100%;
    background: var(--black);
    color: var(--ghost-white);
    font-family: 'Crimson Pro', serif;
    overflow-x: hidden;
    cursor: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='32' height='32'><defs><filter id='g' x='-50%' y='-50%' width='200%' height='200%'><feGaussianBlur stdDeviation='3' result='b'/><feMerge><feMergeNode in='b'/><feMergeNode in='SourceGraphic'/></feMerge></filter></defs><circle cx='16' cy='16' r='5' fill='%23e879f9' filter='url(%23g)'/></svg>") 16 16, auto;
  }

  /* ‚îÄ‚îÄ CANVAS layers ‚îÄ‚îÄ */
  #smokeCanvas {
    position: fixed;
    inset: 0;
    z-index: 0;
    pointer-events: none;
    opacity: 0.7;
  }

  #petalCanvas {
    position: fixed;
    inset: 0;
    z-index: 1;
    pointer-events: none;
  }

  /* ‚îÄ‚îÄ Background gradient ‚îÄ‚îÄ */
  .bg-gradient {
    position: fixed;
    inset: 0;
    z-index: 0;
    background:
      radial-gradient(ellipse 60% 50% at 20% 20%, rgba(90,20,160,0.3) 0%, transparent 60%),
      radial-gradient(ellipse 50% 60% at 80% 80%, rgba(40,10,90,0.4) 0%, transparent 55%),
      radial-gradient(ellipse 80% 40% at 50% 100%, rgba(20,5,50,0.6) 0%, transparent 70%),
      linear-gradient(160deg, #030308 0%, #070515 40%, #0a0818 100%);
  }

  /* ‚îÄ‚îÄ Stars ‚îÄ‚îÄ */
  .stars {
    position: fixed;
    inset: 0;
    z-index: 0;
    pointer-events: none;
  }
  .star {
    position: absolute;
    background: white;
    border-radius: 50%;
    animation: twinkle var(--dur) ease-in-out infinite alternate;
    animation-delay: var(--delay);
  }
  @keyframes twinkle {
    from { opacity: var(--min-op); transform: scale(1); }
    to   { opacity: var(--max-op); transform: scale(1.8); }
  }

  /* ‚îÄ‚îÄ Main wrapper ‚îÄ‚îÄ */
  .wrapper {
    position: relative;
    z-index: 10;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 60px 20px 100px;
  }

  /* ‚îÄ‚îÄ Rune circle ‚îÄ‚îÄ */
  .rune-circle {
    position: relative;
    width: 160px;
    height: 160px;
    margin-bottom: 32px;
    animation: slowSpin 30s linear infinite;
  }
  @keyframes slowSpin { to { transform: rotate(360deg); } }

  .rune-ring {
    position: absolute;
    inset: 0;
    border-radius: 50%;
    border: 1px solid rgba(147,51,234,0.4);
    animation: pulseBorder 3s ease-in-out infinite;
  }
  .rune-ring:nth-child(1) { inset: 0; border-color: rgba(147,51,234,0.5); animation-delay: 0s; }
  .rune-ring:nth-child(2) { inset: 10px; border-color: rgba(167,71,254,0.3); animation-delay: 1s; }
  .rune-ring:nth-child(3) { inset: 20px; border-color: rgba(107,33,168,0.6); animation-delay: 2s; }
  @keyframes pulseBorder {
    0%,100% { box-shadow: 0 0 4px rgba(147,51,234,0.3); }
    50%      { box-shadow: 0 0 20px rgba(147,51,234,0.7), inset 0 0 15px rgba(107,33,168,0.2); }
  }

  .avatar {
    position: absolute;
    inset: 25px;
    border-radius: 50%;
    overflow: hidden;
    border: 2px solid rgba(147,51,234,0.6);
    box-shadow: 0 0 30px rgba(107,33,168,0.5), inset 0 0 20px rgba(0,0,0,0.5);
    animation: slowSpin 30s linear infinite reverse;
  }
  .avatar img {
    width: 100%; height: 100%;
    object-fit: cover;
    filter: saturate(0.7) brightness(0.85);
  }
  .avatar-placeholder {
    width: 100%; height: 100%;
    background: radial-gradient(circle at 40% 35%, rgba(107,33,168,0.6), rgba(3,3,8,0.9));
    display: flex; align-items: center; justify-content: center;
    font-size: 42px;
  }

  /* ‚îÄ‚îÄ Name ‚îÄ‚îÄ */
  .name-block {
    text-align: center;
    margin-bottom: 8px;
  }
  .name {
    font-family: 'Cinzel Decorative', serif;
    font-size: clamp(1.6rem, 5vw, 2.8rem);
    font-weight: 900;
    letter-spacing: 0.12em;
    background: linear-gradient(135deg, #c4b5fd, #e879f9, #a78bfa, #7c3aed);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    filter: drop-shadow(0 0 15px rgba(147,51,234,0.6));
    animation: nameGlow 4s ease-in-out infinite;
  }
  @keyframes nameGlow {
    0%,100% { filter: drop-shadow(0 0 10px rgba(147,51,234,0.5)); }
    50%      { filter: drop-shadow(0 0 25px rgba(196,181,253,0.9)); }
  }

  .title-tag {
    font-family: 'Noto Serif JP', serif;
    font-weight: 200;
    font-size: 0.8rem;
    letter-spacing: 0.4em;
    color: rgba(196,181,253,0.6);
    text-transform: uppercase;
    margin-top: 6px;
  }

  /* ‚îÄ‚îÄ Divider ‚îÄ‚îÄ */
  .divider {
    width: 260px;
    height: 1px;
    background: linear-gradient(90deg, transparent, rgba(147,51,234,0.7), rgba(232,121,249,0.5), rgba(147,51,234,0.7), transparent);
    margin: 24px auto;
    position: relative;
  }
  .divider::before, .divider::after {
    content: '‚ú¶';
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    color: rgba(196,181,253,0.7);
    font-size: 10px;
  }
  .divider::before { left: -14px; }
  .divider::after  { right: -14px; }

  /* ‚îÄ‚îÄ Bio card ‚îÄ‚îÄ */
  .bio-card {
    background: linear-gradient(135deg, rgba(15,8,35,0.9), rgba(7,5,20,0.95));
    border: 1px solid rgba(107,33,168,0.3);
    border-radius: 2px;
    padding: 30px 36px;
    max-width: 520px;
    width: 100%;
    margin-bottom: 28px;
    position: relative;
    box-shadow: 0 0 40px rgba(107,33,168,0.15), inset 0 0 30px rgba(0,0,0,0.3);
    backdrop-filter: blur(10px);
  }
  .bio-card::before {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: 2px;
    padding: 1px;
    background: linear-gradient(135deg, rgba(147,51,234,0.4), transparent, rgba(232,121,249,0.2), transparent);
    -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
    -webkit-mask-composite: xor;
    mask-composite: exclude;
    pointer-events: none;
  }

  .corner-rune {
    position: absolute;
    font-size: 10px;
    color: rgba(147,51,234,0.5);
    font-family: 'Cinzel Decorative', serif;
  }
  .corner-rune.tl { top: 8px; left: 10px; }
  .corner-rune.tr { top: 8px; right: 10px; }
  .corner-rune.bl { bottom: 8px; left: 10px; }
  .corner-rune.br { bottom: 8px; right: 10px; }

  .bio-label {
    font-family: 'Cinzel Decorative', serif;
    font-size: 0.55rem;
    letter-spacing: 0.35em;
    color: rgba(167,71,254,0.7);
    text-transform: uppercase;
    margin-bottom: 12px;
  }
  .bio-text {
    font-size: 1.05rem;
    font-weight: 300;
    line-height: 1.8;
    color: rgba(220,210,255,0.8);
    font-style: italic;
  }
  .bio-line {
    display: flex;
    align-items: flex-start;
    gap: 10px;
    margin: 8px 0;
  }
  .bio-line .ico { color: rgba(147,51,234,0.8); font-style: normal; flex-shrink: 0; }

  /* ‚îÄ‚îÄ Music player ‚îÄ‚îÄ */
  .music-card {
    background: linear-gradient(135deg, rgba(10,5,25,0.95), rgba(20,10,45,0.9));
    border: 1px solid rgba(107,33,168,0.35);
    border-radius: 2px;
    padding: 22px 28px;
    max-width: 520px;
    width: 100%;
    margin-bottom: 28px;
    backdrop-filter: blur(12px);
    box-shadow: 0 0 30px rgba(107,33,168,0.12);
  }

  .player-header {
    display: flex;
    align-items: center;
    gap: 14px;
    margin-bottom: 18px;
  }
  .vinyl {
    width: 52px; height: 52px;
    border-radius: 50%;
    background: radial-gradient(circle at 50%, #1a0a2e 30%, #0d0618 60%, #1a0a2e 100%);
    border: 2px solid rgba(147,51,234,0.4);
    position: relative;
    flex-shrink: 0;
    animation: vinylSpin 3s linear infinite paused;
  }
  .vinyl.playing { animation-play-state: running; }
  @keyframes vinylSpin { to { transform: rotate(360deg); } }
  .vinyl::after {
    content: '';
    position: absolute;
    inset: 40%;
    border-radius: 50%;
    background: rgba(147,51,234,0.5);
    box-shadow: 0 0 8px rgba(147,51,234,0.8);
  }
  .vinyl::before {
    content: '';
    position: absolute;
    inset: 8px;
    border-radius: 50%;
    border: 1px solid rgba(107,33,168,0.2);
  }

  .track-info { flex: 1; min-width: 0; }
  .track-name {
    font-family: 'Cinzel Decorative', serif;
    font-size: 0.75rem;
    color: rgba(196,181,253,0.95);
    letter-spacing: 0.08em;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
  .track-sub {
    font-size: 0.75rem;
    color: rgba(147,51,234,0.7);
    margin-top: 3px;
    font-style: italic;
  }

  /* Progress */
  .progress-wrap {
    margin-bottom: 14px;
  }
  .progress-bar-bg {
    width: 100%;
    height: 2px;
    background: rgba(107,33,168,0.2);
    border-radius: 2px;
    position: relative;
    cursor: pointer;
  }
  .progress-bar-fill {
    height: 100%;
    background: linear-gradient(90deg, #7c3aed, #e879f9);
    border-radius: 2px;
    width: 0%;
    transition: width 0.3s linear;
    position: relative;
  }
  .progress-bar-fill::after {
    content: '';
    position: absolute;
    right: -4px; top: -3px;
    width: 8px; height: 8px;
    border-radius: 50%;
    background: #e879f9;
    box-shadow: 0 0 8px #e879f9;
  }
  .time-row {
    display: flex;
    justify-content: space-between;
    font-size: 0.65rem;
    color: rgba(147,51,234,0.6);
    margin-top: 6px;
    font-family: 'Crimson Pro', monospace;
  }

  .controls {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 22px;
  }
  .ctrl-btn {
    background: none;
    border: none;
    cursor: pointer;
    color: rgba(196,181,253,0.7);
    font-size: 1.1rem;
    transition: all 0.25s;
    padding: 6px;
  }
  .ctrl-btn:hover { color: #e879f9; filter: drop-shadow(0 0 8px #e879f9); }
  .play-btn {
    width: 46px; height: 46px;
    border-radius: 50%;
    border: 1.5px solid rgba(147,51,234,0.6) !important;
    background: linear-gradient(135deg, rgba(107,33,168,0.4), rgba(20,5,50,0.8)) !important;
    font-size: 1.2rem !important;
    display: flex; align-items: center; justify-content: center;
    box-shadow: 0 0 18px rgba(107,33,168,0.3);
    transition: all 0.3s !important;
  }
  .play-btn:hover {
    box-shadow: 0 0 30px rgba(147,51,234,0.7) !important;
    border-color: #e879f9 !important;
    transform: scale(1.08);
  }

  /* file input */
  .file-upload-label {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    font-size: 0.68rem;
    color: rgba(147,51,234,0.6);
    cursor: pointer;
    border: 1px dashed rgba(107,33,168,0.3);
    padding: 6px 14px;
    border-radius: 2px;
    margin-top: 14px;
    letter-spacing: 0.12em;
    transition: all 0.3s;
    font-family: 'Cinzel Decorative', serif;
    width: 100%;
    justify-content: center;
  }
  .file-upload-label:hover {
    border-color: rgba(147,51,234,0.6);
    color: rgba(196,181,253,0.9);
    box-shadow: 0 0 12px rgba(107,33,168,0.2);
  }
  #fileInput { display: none; }

  /* Visualizer bars */
  .visualizer {
    display: flex;
    align-items: flex-end;
    gap: 3px;
    height: 24px;
    margin-bottom: 14px;
  }
  .bar {
    flex: 1;
    background: linear-gradient(to top, #7c3aed, #e879f9);
    border-radius: 1px;
    height: 3px;
    transition: height 0.1s;
    opacity: 0.7;
  }

  /* ‚îÄ‚îÄ Contact cards ‚îÄ‚îÄ */
  .contacts-grid {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;
    gap: 14px;
    max-width: 520px;
    width: 100%;
    margin-bottom: 28px;
  }
  @media (max-width: 480px) {
    .contacts-grid { grid-template-columns: 1fr; }
  }

  .contact-card {
    background: linear-gradient(135deg, rgba(10,5,25,0.92), rgba(15,8,35,0.95));
    border: 1px solid rgba(107,33,168,0.25);
    border-radius: 2px;
    padding: 18px 16px;
    text-align: center;
    position: relative;
    overflow: hidden;
    transition: all 0.35s;
    cursor: pointer;
    text-decoration: none;
    display: block;
  }
  .contact-card::before {
    content: '';
    position: absolute;
    inset: 0;
    background: radial-gradient(circle at 50% 0%, rgba(147,51,234,0.15), transparent 70%);
    opacity: 0;
    transition: opacity 0.35s;
  }
  .contact-card:hover::before { opacity: 1; }
  .contact-card:hover {
    border-color: rgba(147,51,234,0.6);
    box-shadow: 0 0 24px rgba(107,33,168,0.3), 0 -2px 0 rgba(147,51,234,0.6);
    transform: translateY(-3px);
  }
  .contact-icon { font-size: 1.8rem; margin-bottom: 8px; display: block; }
  .contact-type {
    font-family: 'Cinzel Decorative', serif;
    font-size: 0.5rem;
    letter-spacing: 0.25em;
    color: rgba(147,51,234,0.7);
    text-transform: uppercase;
    margin-bottom: 6px;
  }
  .contact-val {
    font-size: 0.85rem;
    color: rgba(220,210,255,0.85);
    font-style: italic;
    word-break: break-all;
  }

  /* Bank card special */
  .bank-card .contact-icon { filter: drop-shadow(0 0 8px rgba(250,204,21,0.5)); }

  /* ‚îÄ‚îÄ Footer ‚îÄ‚îÄ */
  .footer-sigil {
    font-family: 'Cinzel Decorative', serif;
    font-size: 0.5rem;
    letter-spacing: 0.5em;
    color: rgba(107,33,168,0.4);
    text-align: center;
    margin-top: 20px;
  }

  /* ‚îÄ‚îÄ Floating runes ‚îÄ‚îÄ */
  .floating-rune {
    position: fixed;
    font-family: 'Cinzel Decorative', serif;
    font-size: 0.9rem;
    color: rgba(107,33,168,0.2);
    pointer-events: none;
    animation: floatRune var(--dur) ease-in-out infinite;
    z-index: 2;
  }
  @keyframes floatRune {
    0%,100% { transform: translateY(0) rotate(0deg); opacity: 0.15; }
    50%      { transform: translateY(-20px) rotate(10deg); opacity: 0.35; }
  }

  /* Waveform animation when playing */
  .bar.active {
    animation: waveBounce 0.6s ease-in-out infinite;
    animation-delay: var(--d);
  }
  @keyframes waveBounce {
    0%,100% { height: 3px; }
    50%      { height: calc(var(--h) * 1px); }
  }

  button, a, .contact-card, .ctrl-btn, .file-upload-label {
    cursor: pointer;
  }

</style>
</head>
<body>

<div class="bg-gradient"></div>
<div class="stars" id="stars"></div>
<canvas id="smokeCanvas"></canvas>
<canvas id="petalCanvas"></canvas>

<div class="wrapper">

  <!-- Avatar / Rune circle -->
  <div class="rune-circle">
    <div class="rune-ring"></div>
    <div class="rune-ring"></div>
    <div class="rune-ring"></div>
    <div class="avatar">
      <div class="avatar-placeholder">ü©∑</div>
    </div>
  </div>

  <!-- Name -->
  <div class="name-block">
    <div class="name">Ph·∫°m Quang V∆∞∆°ng</div>
    <div class="title-tag">‚ú¶ Dev Api ¬∑ Coding ¬∑ Updating ‚ú¶</div>
  </div>

  <div class="divider"></div>

  <!-- Bio -->
  <div class="bio-card">
    <span class="corner-rune tl">‚üÅ</span>
    <span class="corner-rune tr">‚üÅ</span>
    <span class="corner-rune bl">‚üÅ</span>
    <span class="corner-rune br">‚üÅ</span>
    <div class="bio-label">‚ú¶ INFO ‚ú¶</div>
    <div class="bio-line"><span class="ico">üéÇ</span><span class="bio-text">Sinh ng√†y: 03/02/2010</span></div>
    <div class="bio-line"><span class="ico">üìç</span><span class="bio-text">N∆°i ·ªü: H∆∞ng Y√™n, Vi·ªát Nam</span></div>
    <div class="bio-line"><span class="ico">üíú</span><span class="bio-text">ƒêam m√™: Coding ¬∑ Music ¬∑ The Night</span></div>
    <div class="bio-line"><span class="ico">üåô</span><span class="bio-text">ƒêang t√¨m ki·∫øm b√¨nh y√™n trong t·ª´ng h∆°i th·ªü...</span></div>
  </div>

  <!-- Music Player -->
  <div class="music-card">
    <div class="player-header">
      <div class="vinyl" id="vinyl">
        <div></div>
      </div>
      <div class="track-info">
        <div class="track-name" id="trackName">‚Äî Ch∆∞a c√≥ b√†i n√†o ‚Äî</div>
        <div class="track-sub" id="trackSub">T·∫£i nh·∫°c l√™n ƒë·ªÉ nghe</div>
      </div>
    </div>

    <div class="visualizer" id="visualizer">
    </div>

    <div class="progress-wrap">
      <div class="progress-bar-bg" id="progressBg">
        <div class="progress-bar-fill" id="progressFill"></div>
      </div>
      <div class="time-row">
        <span id="curTime">0:00</span>
        <span id="durTime">0:00</span>
      </div>
    </div>

    <div class="controls">
      <button class="ctrl-btn" id="prevBtn" title="Tr∆∞·ªõc">‚èÆ</button>
      <button class="ctrl-btn play-btn" id="playBtn" title="Play/Pause">‚ñ∂</button>
      <button class="ctrl-btn" id="nextBtn" title="Sau">‚è≠</button>
    </div>

    <label class="file-upload-label" for="fileInput">
      ‚ú¶ T·∫£i file nh·∫°c l√™n ‚ú¶
    </label>
    <input type="file" id="fileInput" accept="audio/*" multiple>
  </div>

  <!-- Contacts -->
  <div class="contacts-grid">
    <a class="contact-card" href="https://www.facebook.com/profile.php?id=61588505997992" target="_blank">
      <span class="contact-icon">üåê</span>
      <div class="contact-type">Facebook</div>
      <div class="contact-val">ËåÉÂÖâÁéã</div>
    </a>
    <div class="contact-card">
      <span class="contact-icon">üíü</span>
      <div class="contact-type">Zalo</div>
      <div class="contact-val">0975 868 667</div>
    </div>
    <div class="contact-card bank-card">
      <span class="contact-icon">üí≥</span>
      <div class="contact-type">STK Bank</div>
      <div class="contact-val">MB BANK<br>0975868667</div>
    </div>
  </div>

  <div class="footer-sigil">‚ú¶ ¬∑ ¬∑ ¬∑ POWER BY QUANG VUONG ¬∑ ¬∑ ¬∑ ‚ú¶</div>
</div>

<!-- Floating runes -->
<script>
  const runeChars = ['·ö†','·ö¢','·ö¶','·ö®','·ö±','·ö≤','·ö∑','·öπ','·ö∫','·öæ','·õÅ','·õÉ','·õá','·õà','·õâ','·õä','·õè','·õí','·õñ','·õó','·õö','·õú','·õû','·õü'];
  for(let i=0;i<12;i++){
    const r=document.createElement('div');
    r.className='floating-rune';
    r.textContent=runeChars[Math.floor(Math.random()*runeChars.length)];
    r.style.left=Math.random()*95+'%';
    r.style.top=Math.random()*90+'%';
    r.style['--dur']=(8+Math.random()*10)+'s';
    r.style.animationDelay=(-Math.random()*10)+'s';
    document.body.appendChild(r);
  }

  // Stars
  const starsEl=document.getElementById('stars');
  for(let i=0;i<180;i++){
    const s=document.createElement('div');
    s.className='star';
    const size=Math.random()<0.7?1:Math.random()<0.5?1.5:2;
    s.style.cssText=`width:${size}px;height:${size}px;left:${Math.random()*100}%;top:${Math.random()*100}%;--dur:${2+Math.random()*4}s;--delay:${-Math.random()*6}s;--min-op:${0.1+Math.random()*0.2};--max-op:${0.6+Math.random()*0.4}`;
    starsEl.appendChild(s);
  }

  // ‚îÄ‚îÄ Smoke Canvas ‚îÄ‚îÄ
  const sCanvas=document.getElementById('smokeCanvas');
  const sCtx=sCanvas.getContext('2d');
  let W,H;
  function resize(){W=sCanvas.width=window.innerWidth;H=sCanvas.height=window.innerHeight;}
  resize(); window.addEventListener('resize',resize);

  class Smoke {
    constructor(){this.reset();}
    reset(){
      this.x=Math.random()*W;
      this.y=H+60;
      this.vx=(Math.random()-0.5)*0.4;
      this.vy=-(0.3+Math.random()*0.6);
      this.r=40+Math.random()*80;
      this.life=0;
      this.maxLife=200+Math.random()*200;
      this.hue=260+Math.random()*40;
    }
    update(){
      this.x+=this.vx; this.y+=this.vy;
      this.life++;
      this.vx+=(Math.random()-0.5)*0.05;
      if(this.life>this.maxLife) this.reset();
    }
    draw(){
      const p=this.life/this.maxLife;
      const op=p<0.3?p/0.3:p>0.7?(1-p)/0.3:1;
      const g=sCtx.createRadialGradient(this.x,this.y,0,this.x,this.y,this.r*(1+p*0.5));
      g.addColorStop(0,`hsla(${this.hue},60%,25%,${op*0.12})`);
      g.addColorStop(0.5,`hsla(${this.hue},50%,15%,${op*0.06})`);
      g.addColorStop(1,'transparent');
      sCtx.fillStyle=g;
      sCtx.beginPath();
      sCtx.arc(this.x,this.y,this.r*(1+p*0.5),0,Math.PI*2);
      sCtx.fill();
    }
  }
  const smokes=Array.from({length:25},()=>{
    const s=new Smoke();
    s.life=Math.random()*s.maxLife;
    return s;
  });
  function animSmoke(){
    sCtx.clearRect(0,0,W,H);
    smokes.forEach(s=>{s.update();s.draw();});
    requestAnimationFrame(animSmoke);
  }
  animSmoke();

  // ‚îÄ‚îÄ Petal Canvas ‚îÄ‚îÄ
  const pCanvas=document.getElementById('petalCanvas');
  const pCtx=pCanvas.getContext('2d');
  pCanvas.width=window.innerWidth; pCanvas.height=window.innerHeight;
  window.addEventListener('resize',()=>{pCanvas.width=window.innerWidth;pCanvas.height=window.innerHeight;});

  class Petal {
    constructor(){this.reset(true);}
    reset(init=false){
      this.x=Math.random()*pCanvas.width;
      this.y=init?Math.random()*pCanvas.height:-30;
      this.size=4+Math.random()*8;
      this.vx=(Math.random()-0.5)*1.2;
      this.vy=0.6+Math.random()*1.2;
      this.rot=Math.random()*Math.PI*2;
      this.rotV=(Math.random()-0.5)*0.05;
      this.swing=Math.random()*Math.PI*2;
      this.opacity=0.4+Math.random()*0.5;
      this.hue=270+Math.random()*60; // purple to pink
    }
    update(){
      this.swing+=0.03;
      this.x+=this.vx+Math.sin(this.swing)*0.8;
      this.y+=this.vy;
      this.rot+=this.rotV;
      if(this.y>pCanvas.height+30) this.reset();
    }
    draw(){
      pCtx.save();
      pCtx.translate(this.x,this.y);
      pCtx.rotate(this.rot);
      pCtx.globalAlpha=this.opacity;
      // Draw petal shape
      pCtx.beginPath();
      pCtx.ellipse(0,0,this.size*0.45,this.size,0,0,Math.PI*2);
      const grad=pCtx.createRadialGradient(0,-this.size*0.3,0,0,0,this.size);
      grad.addColorStop(0,`hsla(${this.hue},80%,80%,1)`);
      grad.addColorStop(0.6,`hsla(${this.hue},70%,60%,0.8)`);
      grad.addColorStop(1,`hsla(${this.hue},60%,40%,0)`);
      pCtx.fillStyle=grad;
      pCtx.fill();
      pCtx.restore();
    }
  }
  const petals=Array.from({length:55},()=>new Petal());
  function animPetals(){
    pCtx.clearRect(0,0,pCanvas.width,pCanvas.height);
    petals.forEach(p=>{p.update();p.draw();});
    requestAnimationFrame(animPetals);
  }
  animPetals();

  // ‚îÄ‚îÄ Visualizer bars ‚îÄ‚îÄ
  const vizEl=document.getElementById('visualizer');
  const numBars=28;
  const barEls=[];
  for(let i=0;i<numBars;i++){
    const b=document.createElement('div');
    b.className='bar';
    b.style['--d']=(i*0.04)+'s';
    b.style['--h']=String(6+Math.floor(Math.random()*18));
    vizEl.appendChild(b);
    barEls.push(b);
  }
  let isPlaying=false;
  let vizInterval=null;

  function startViz(){
    if(vizInterval) return;
    vizInterval=setInterval(()=>{
      barEls.forEach(b=>{
        const h=4+Math.random()*20;
        b.style.height=h+'px';
      });
    },100);
  }
  function stopViz(){
    clearInterval(vizInterval);
    vizInterval=null;
    barEls.forEach(b=>{b.style.height='3px';});
  }

  // ‚îÄ‚îÄ Music Player ‚îÄ‚îÄ
  const audio=new Audio();
  const playBtn=document.getElementById('playBtn');
  const vinyl=document.getElementById('vinyl');
  const trackName=document.getElementById('trackName');
  const trackSub=document.getElementById('trackSub');
  const progressFill=document.getElementById('progressFill');
  const progressBg=document.getElementById('progressBg');
  const curTimeEl=document.getElementById('curTime');
  const durTimeEl=document.getElementById('durTime');
  const fileInput=document.getElementById('fileInput');
  let playlist=[];
  let currentIndex=0;

  function fmtTime(s){
    const m=Math.floor(s/60);
    const ss=String(Math.floor(s%60)).padStart(2,'0');
    return `${m}:${ss}`;
  }

  function loadTrack(i){
    const f=playlist[i];
    if(!f) return;
    audio.src=URL.createObjectURL(f);
    trackName.textContent=f.name.replace(/\.[^.]+$/,'');
    trackSub.textContent='‚ú¶ Now Loading ‚ú¶';
    audio.load();
  }

  function playPause(){
    if(!playlist.length) return;
    if(audio.paused){
      audio.play();
      playBtn.textContent='‚è∏';
      vinyl.classList.add('playing');
      isPlaying=true;
      startViz();
      trackSub.textContent='‚ú¶ ƒêang ph√°t ‚ú¶';
    } else {
      audio.pause();
      playBtn.textContent='‚ñ∂';
      vinyl.classList.remove('playing');
      isPlaying=false;
      stopViz();
      trackSub.textContent='‚ú¶ T·∫°m d·ª´ng ‚ú¶';
    }
  }

  audio.addEventListener('timeupdate',()=>{
    if(!audio.duration) return;
    const pct=(audio.currentTime/audio.duration)*100;
    progressFill.style.width=pct+'%';
    curTimeEl.textContent=fmtTime(audio.currentTime);
    durTimeEl.textContent=fmtTime(audio.duration);
  });

  audio.addEventListener('ended',()=>{
    currentIndex=(currentIndex+1)%playlist.length;
    loadTrack(currentIndex);
    audio.play();
    trackSub.textContent='‚ú¶ ƒêang ph√°t ‚ú¶';
  });

  progressBg.addEventListener('click',(e)=>{
    if(!audio.duration) return;
    const rect=progressBg.getBoundingClientRect();
    const pct=(e.clientX-rect.left)/rect.width;
    audio.currentTime=pct*audio.duration;
  });

  playBtn.addEventListener('click',playPause);

  document.getElementById('prevBtn').addEventListener('click',()=>{
    if(!playlist.length) return;
    currentIndex=(currentIndex-1+playlist.length)%playlist.length;
    loadTrack(currentIndex);
    if(isPlaying) audio.play();
  });
  document.getElementById('nextBtn').addEventListener('click',()=>{
    if(!playlist.length) return;
    currentIndex=(currentIndex+1)%playlist.length;
    loadTrack(currentIndex);
    if(isPlaying) audio.play();
  });

  fileInput.addEventListener('change',(e)=>{
    const files=Array.from(e.target.files);
    if(!files.length) return;
    playlist=[...playlist,...files];
    if(playlist.length===files.length){
      currentIndex=0;
      loadTrack(0);
      playBtn.textContent='‚ñ∂';
    }
  });
</script>
</body>
</html>
